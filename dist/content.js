const s=()=>{let t=Array.from(document.querySelectorAll("h1, h2, h3, h4, [role='heading']")).map(e=>({level:e.tagName,text:e.innerText.trim()})).filter(e=>e.text.length>0);t.length===0&&(t=Array.from(document.querySelectorAll("span, div, b, strong")).filter(e=>{const l=window.getComputedStyle(e),i=parseFloat(l.fontSize),o=l.fontWeight;return i>20||i>16&&(o==="bold"||parseInt(o)>=600)}).slice(0,5).map(e=>({level:"Inferred",text:e.innerText.trim()})).filter(e=>e.text.length>1&&e.text.length<50));const n=Array.from(document.querySelectorAll("p, div.content, article, section")).map(e=>e.innerText.trim()).filter(e=>e.length>50).slice(0,10),r=Array.from(document.querySelectorAll("img")).map(e=>({src:e.src,alt:e.alt||"Missing Description",isAccessible:!!e.alt&&e.alt.trim().length>0})).filter(e=>e.src&&e.src.startsWith("http"));return{title:document.title,headings:t,mainText:n,images:r,url:window.location.href}};chrome.runtime.onMessage.addListener((t,n,r)=>{if(t.action==="SCAN_PAGE"){const e=s();r(e)}return!0});
