const l=()=>{const e=Array.from(document.querySelectorAll("h1, h2, h3, h4")).map(t=>({level:t.tagName,text:t.innerText.trim()})).filter(t=>t.text.length>0),a=Array.from(document.querySelectorAll("img")).map((t,i)=>{const o=t.width>50&&t.height>50;return{id:`img-${i}`,src:t.src,alt:t.alt||"âš ï¸ Missing Alt Text",isAccessible:!!t.alt,isOCRCandidate:o&&t.src.startsWith("http"),dimensions:{width:t.width,height:t.height}}}).filter(t=>t.src.startsWith("http")),r=Array.from(document.querySelectorAll('a[href$=".pdf"], a[href*="pdf"]')).map((t,i)=>({id:`pdf-${i}`,text:t.innerText.trim()||"Unnamed PDF Document",href:t.href})),n=Array.from(document.querySelectorAll("a")).filter(t=>!t.href.toLowerCase().endsWith(".pdf")).map(t=>({text:t.innerText.trim(),href:t.href})).filter(t=>t.text.length>0&&t.href.startsWith("http")).slice(0,15),s={title:document.title,headings:e,images:a,links:n,pdfs:r,url:window.location.href,timestamp:Date.now()};return console.log("ðŸš€ Semantic Mirror Scanned (including Visual Candidates):",s),s};chrome.runtime.onMessage.addListener((e,a,r)=>{if(e.action==="SCAN_PAGE"){const n=l();r(n)}return!0});
